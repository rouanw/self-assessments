"use strict";angular.module("coachingApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","ui.bootstrap"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"scripts/features/selfAssessment/self-assessments.html",controller:"SelfAssessmentCtrl"}).when("/teams",{templateUrl:"scripts/features/team/team.html",controller:"TeamCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("coachingApp").controller("SelfAssessmentCtrl",["$scope","SelfAssessment",function(a,b){a.teamUrl="http://raw.githubusercontent.com/rouanw/self-assessments/master/app/users.json",a.getPeople=function(c){b.getPeople(c).then(function(b){a.people=b})},a.showDetail=!0}]),angular.module("coachingApp").directive("spiderChart",function(){return{restrict:"A",scope:{assessment:"="},link:function(a,b){var c=[],d=a.assessment.ratings[a.assessment.ratings.length-2];if(d){var e=[];for(var f in d)e.push(d[f]);var g={data:e,fillColor:"rgba(220,220,220,0.2)",strokeColor:"rgba(220,220,220,1)",pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)"};c.push(g)}var h=a.assessment.ratings[a.assessment.ratings.length-1];if(h){var e=[];for(var f in h)e.push(h[f]);var i={data:e,fillColor:"rgba(151,187,205,0.2)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(151,187,205,1)"};c.push(i)}var e={labels:Object.keys(h),datasets:c},j=b[0].getContext("2d");new Chart(j).Radar(e,{scaleShowLabels:!0})}}}),angular.module("coachingApp").filter("durationInMonths",function(){return function(a){return moment().diff(moment(a),"months")}}),angular.module("coachingApp").factory("SelfAssessment",["$http","$q","NotificationService",function(a,b,c){return{getPeople:function(d){var e,f=a({method:"GET",url:d||"users.json",data:{}}).then(function(b){e=b.data.users;var c=[];return e.forEach(function(b){var d=b.includes("/")?b:"https://raw.githubusercontent.com/"+b+"/my-capability-radar/master/my-radar.json";c.push(a({method:"GET",url:d,data:{}}))}),c});return f.then(function(a){return b.all(a).then(function(a){var b=[];return a.forEach(function(a){var c=a.data;c.summary={category:"Summary",ratings:[{}]},c.assessments.forEach(function(a){var b=a.ratings[a.ratings.length-1],d=[];for(var e in b)d.push(b[e]);var f=_.sum(d),g=f/Object.keys(b).length;c.summary.ratings[0][a.category]=g}),b.push(c)}),b})["catch"](function(a){c.notification={message:"Could not load one or more users specified in users.json",type:"danger"}})})},getTeams:function(){return this.getPeople().then(function(a){var b=_.uniq(_.map(a,function(a){return a.currentTeam})),c=_.map(b,function(b){return{name:b,members:_.filter(a,function(a){return a.currentTeam===b})}});return c})}}}]),angular.module("coachingApp").directive("selfAssessment",function(){return{restrict:"E",scope:{person:"=",showDetail:"="},templateUrl:"scripts/features/selfAssessment/self-assessment.html"}}),angular.module("coachingApp").directive("showDetailOption",function(){return{restrict:"E",templateUrl:"scripts/features/selfAssessment/show-detail.html"}}),angular.module("coachingApp").controller("TeamCtrl",["$scope","SelfAssessment",function(a,b){b.getTeams().then(function(b){a.teams=b,a.selectedTeam=b[0]})}]),angular.module("coachingApp").factory("NotificationService",function(){var a;return{notification:a}}).directive("notification",["NotificationService",function(a){return{restrict:"E",template:'<div ng-show="notificationSvc.notification" class="alert alert-{{notificationSvc.notification.type}}" role="alert">{{notificationSvc.notification.message}}</div>',controller:["$scope",function(b){b.notificationSvc=a}]}}]);